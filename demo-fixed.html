<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fixed Sticky Container Demo</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .main-container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    .title {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
      font-size: 2.2rem;
      font-weight: 300;
    }

    .success-badge {
      display: inline-block;
      background: #4CAF50;
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      margin-left: 10px;
      font-weight: bold;
    }

    .demo-section {
      margin: 40px 0;
      padding: 25px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      background: #fafafa;
    }

    .demo-title {
      font-size: 1.4rem;
      margin-bottom: 15px;
      color: #444;
      display: flex;
      align-items: center;
    }

    .demo-title .icon {
      margin-right: 10px;
      font-size: 1.6rem;
    }

    .modal-container {
      height: 400px;
      overflow: auto;
      border: 3px solid #2196f3;
      border-radius: 8px;
      position: relative;
      background: white;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .content-spacer {
      height: 150px;
      background: linear-gradient(to bottom, #e3f2fd, #bbdefb);
      margin: 15px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #1976d2;
      font-weight: bold;
      font-size: 1.1rem;
    }

    .sticky-element {
      background: #ff9800;
      color: white;
      padding: 20px;
      margin: 15px;
      border-radius: 8px;
      font-weight: bold;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      font-size: 1.1rem;
    }

    .sticky-element.is-sticky {
      background: #4CAF50;
      transform: scale(1.02);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .long-content {
      height: 800px;
      background: linear-gradient(to bottom, #fff3e0, #ffcc80);
      margin: 15px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #f57c00;
      font-weight: bold;
      flex-direction: column;
      text-align: center;
      font-size: 1.2rem;
    }

    .code-example {
      background: #f4f4f4;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 20px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 20px 0;
      line-height: 1.5;
    }

    .highlight {
      background: #ffeb3b;
      padding: 2px 4px;
      border-radius: 3px;
    }

    .fix-explanation {
      background: #e8f5e8;
      border: 2px solid #4CAF50;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .fix-title {
      color: #2e7d32;
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 1.2rem;
    }

    .scroll-hint {
      position: absolute;
      top: 10px;
      right: 15px;
      background: rgba(33, 150, 243, 0.9);
      color: white;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: bold;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 0.7;
      }

      50% {
        opacity: 1;
      }
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 30px 0;
    }

    .before,
    .after {
      padding: 20px;
      border-radius: 8px;
    }

    .before {
      background: #ffebee;
      border: 2px solid #f44336;
    }

    .after {
      background: #e8f5e8;
      border: 2px solid #4CAF50;
    }

    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }

    .status-working {
      background: #4CAF50;
    }

    .status-broken {
      background: #f44336;
    }

    @media (max-width: 768px) {
      .comparison {
        grid-template-columns: 1fr;
      }

      .main-container {
        padding: 20px;
        margin: 10px;
      }
    }
  </style>
</head>

<body>
  <div class="main-container">
    <h1 class="title">
      üéØ Sticky Container - –ò–°–ü–†–ê–í–õ–ï–ù–û
      <span class="success-badge">‚úÖ WORKING</span>
    </h1>

    <div class="fix-explanation">
      <div class="fix-title">üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:</div>
      <ul>
        <li><strong>–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:</strong> Sticky —ç–ª–µ–º–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–ª–∏–ø–∞–µ—Ç –∫ <span
            class="highlight">–≤–∏–¥–∏–º–æ–π —á–∞—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</span>, –∞ –Ω–µ –∫ scrollTop</li>
        <li><strong>Position: relative:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ absolute
          –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</li>
        <li><strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –≤ JSON.stringify</li>
      </ul>
    </div>

    <div class="comparison">
      <div class="before">
        <h3><span class="status-indicator status-broken"></span>–î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        <div class="code-example">styles.top = `${scrollTop + offset.top}px`;
          // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: —ç–ª–µ–º–µ–Ω—Ç —É–ª–µ—Ç–∞–µ—Ç –≤–Ω–∏–∑</div>
      </div>
      <div class="after">
        <h3><span class="status-indicator status-working"></span>–ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        <div class="code-example">styles.top = `${offset.top}px`;
          // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø—Ä–∏–ª–∏–ø–∞–µ—Ç –∫ –≤–µ—Ä—Ö—É –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏</div>
      </div>
    </div>

    <div class="demo-section">
      <div class="demo-title">
        <span class="icon">üé™</span>
        –ñ–∏–≤–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      </div>

      <div class="modal-container" id="modal-demo">
        <div class="scroll-hint">üëÜ Scroll Me!</div>

        <div class="content-spacer">
          üìã –ö–æ–Ω—Ç–µ–Ω—Ç –¥–æ sticky —ç–ª–µ–º–µ–Ω—Ç–∞
        </div>

        <div class="sticky-element" id="sticky-demo">
          üß≤ –Ø –ø—Ä–∏–ª–∏–ø–∞—é –∫ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞!<br>
          <small>Scroll to see the magic ‚ú®</small>
        </div>

        <div class="long-content">
          üìú –î–ª–∏–Ω–Ω—ã–π –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç<br>
          <small>–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Å–∫—Ä–æ–ª–ª–∏—Ç—å...</small><br><br>

          <div style="font-size: 0.9rem; opacity: 0.8;">
            Sticky —ç–ª–µ–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è<br>
            –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–º –∫ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏<br>
            —ç—Ç–æ–≥–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞,<br>
            –∞ –Ω–µ —É–ª–µ—Ç–∞—Ç—å –∑–∞ –µ–≥–æ –ø—Ä–µ–¥–µ–ª—ã! üéØ
          </div>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <div class="demo-title">
        <span class="icon">üíª</span>
        –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è React
      </div>

      <div class="code-example">// ‚úÖ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        const modalRef = useRef&lt;HTMLDivElement&gt;(null);

        &lt;div ref={modalRef} className="modal-body"&gt;
        &lt;StickyContainer
        container={modalRef.current} // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º ref
        direction="top"
        offset={{ top: 10 }}
        containerOffset={{ top: 20 }}
        &gt;
        Sticky Header
        &lt;/StickyContainer&gt;
        &lt;/div&gt;</div>

      <div class="code-example">// ‚ùå –ò–ó–ë–ï–ì–ê–ô–¢–ï —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –∫–æ–≥–¥–∞ sticky –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        &lt;div className="modal-body"&gt;
        &lt;StickyContainer
        container=".modal-body" // ‚ùå –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
        direction="top"
        &gt;
        Sticky Header
        &lt;/StickyContainer&gt;
        &lt;/div&gt;</div>
    </div>

    <div class="demo-section">
      <div class="demo-title">
        <span class="icon">üèÜ</span>
        –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
      </div>
      <ul style="line-height: 2; font-size: 1.1rem;">
        <li><span class="status-indicator status-working"></span>Sticky —ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–ª–∏–ø–∞–µ—Ç –∫ –∫—Ä–∞—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        </li>
        <li><span class="status-indicator status-working"></span>–í—Å–µ unit –∏ integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç</li>
        <li><span class="status-indicator status-working"></span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ ref, —Ç–∞–∫ –∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ (–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö
          —Å–ª—É—á–∞—è—Ö)</li>
        <li><span class="status-indicator status-working"></span>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏</li>
        <li><span class="status-indicator status-working"></span>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ position: relative –Ω–∞
          –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</li>
      </ul>
    </div>
  </div>

  <script>
    // –°–∏–º—É–ª—è—Ü–∏—è sticky –ø–æ–≤–µ–¥–µ–Ω–∏—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    class FixedStickySimulator {
      constructor(element, container) {
        this.element = element;
        this.container = container;
        this.originalTop = 0;
        this.isSticky = false;
        this.offset = 15; // –æ—Ç—Å—Ç—É–ø –æ—Ç –≤–µ—Ä—Ö–∞

        this.init();
      }

      init() {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º position: relative –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        this.container.style.position = 'relative';

        this.updateOriginalPosition();
        this.container.addEventListener('scroll', () => this.handleScroll());
        window.addEventListener('resize', () => this.updateOriginalPosition());

        console.log('‚úÖ FixedStickySimulator initialized');
      }

      updateOriginalPosition() {
        // –ü–æ–ª—É—á–∞–µ–º –∏–∑–Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é —ç–ª–µ–º–µ–Ω—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        const containerRect = this.container.getBoundingClientRect();
        const elementRect = this.element.getBoundingClientRect();
        this.originalTop = elementRect.top - containerRect.top + this.container.scrollTop;

        console.log('üìç Original position updated:', this.originalTop);
      }

      handleScroll() {
        const scrollTop = this.container.scrollTop;
        const threshold = this.originalTop - this.offset;

        const shouldStick = scrollTop >= threshold;

        if (shouldStick !== this.isSticky) {
          this.isSticky = shouldStick;
          this.updateElement();

          console.log(shouldStick ? 'üß≤ Sticky activated!' : 'üìç Sticky deactivated');
        }
      }

      updateElement() {
        if (this.isSticky) {
          // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º offset –æ—Ç –≤–µ—Ä—Ö–∞ –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏, –∞ –Ω–µ scrollTop
          this.element.style.position = 'absolute';
          this.element.style.top = `${this.offset}px`; // –ü—Ä–∏–ª–∏–ø–∞–µ–º –∫ –≤–µ—Ä—Ö—É –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏
          this.element.style.left = '15px';
          this.element.style.right = '15px';
          this.element.style.zIndex = '10';
          this.element.classList.add('is-sticky');
        } else {
          // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ normal flow
          this.element.style.position = '';
          this.element.style.top = '';
          this.element.style.left = '';
          this.element.style.right = '';
          this.element.style.zIndex = '';
          this.element.classList.remove('is-sticky');
        }
      }
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('modal-demo');
      const stickyElement = document.getElementById('sticky-demo');

      if (container && stickyElement) {
        new FixedStickySimulator(stickyElement, container);
        console.log('üéâ Demo started!');
      }
    });
  </script>
</body>

</html>
